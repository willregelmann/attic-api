# Laravel API Environment Configuration
# Copy this to .env and update with your values

# Application
APP_NAME="Attic API"
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_TIMEZONE=UTC
APP_URL=http://localhost

# Database (PostgreSQL via Docker)
# IMPORTANT: Use pgsql, not sqlite
DB_CONNECTION=pgsql
DB_HOST=pgsql
DB_PORT=5432
DB_DATABASE=attic
DB_USERNAME=sail
DB_PASSWORD=password

# Forward PostgreSQL to host on port 54320 (to avoid conflict with Supabase on 5432)
FORWARD_DB_PORT=54320

# Database of Things Integration (Supabase)
# Local dev: Use host.docker.internal to reach Supabase running on host machine from Docker container
# Production: Use your actual Supabase URL
DATABASE_OF_THINGS_API_URL=http://host.docker.internal:54321
DATABASE_OF_THINGS_API_KEY=sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH
DATABASE_OF_THINGS_SERVICE_KEY=sb_secret_N7UND0UgjKTVK-Uodkm0Hg_xSvEMPvz

# Database of Things Public Host (for image URL transformation)
# Images returned from Supabase contain Docker internal hostnames that browsers can't resolve
# This transforms those URLs to be accessible from the browser
# Local development: Use 'localhost' (browser on host reaches Supabase on host)
# Production: Use your public domain (e.g., 'api.yourdomain.com') or leave empty for no transformation
DATABASE_OF_THINGS_PUBLIC_HOST=localhost

# Session & Cache
SESSION_DRIVER=database
SESSION_LIFETIME=120
# Use redis for Docker, database for local non-Docker
CACHE_STORE=redis
QUEUE_CONNECTION=redis

# Redis (required for Docker, optional for local)
REDIS_CLIENT=phpredis
REDIS_HOST=redis  # Use 'redis' for Docker, '127.0.0.1' for local
REDIS_PASSWORD=null  # Set to 'localredispass' for Docker
REDIS_PORT=6379

# GraphQL
LIGHTHOUSE_CACHE_ENABLE=false
# GraphiQL IDE is available at /graphiql (installed via mll-lab/laravel-graphiql)

# Laravel Sanctum (API Authentication)
SANCTUM_STATEFUL_DOMAINS=localhost:5173
SESSION_DOMAIN=localhost

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id-here
GOOGLE_CLIENT_SECRET=your-google-client-secret-here

# Logging
LOG_CHANNEL=stack
LOG_LEVEL=debug

# Mail (for development, use log driver)
MAIL_MAILER=log

# Broadcasting
BROADCAST_DRIVER=log

# File Storage
FILESYSTEM_DISK=local

# Production Settings (Railway)
# Uncomment and configure for production deployment
# DATABASE_URL=postgresql://user:pass@host:port/db
# REDIS_URL=redis://user:pass@host:port
# APP_ENV=production
# APP_DEBUG=false
